<h2>Product Suppliers</h2>

{{! READ table }}
<table>
    <thead>
        {{! printing DB attributes for the header }}
        <tr>
            <th>ID</th>
            <th>Product Name</th>
            <th>Supplier Name</th>

            <th></th>
        </tr>
    </thead>

    <tbody>
        {{! For each row, print the proSupID, productID, supplierID }}
        {{#each productSuppliers}}
        <tr>
            <td>{{this.proSupID}}</td>
            <td>{{this.productName}}</td>
            <td>{{this.supplierName}}</td>
            
            {{! DELETE form }}
            <form id='delete_person_form'>
                <input type='hidden' name='delete_person_id' value='{{this.ID}}' />
                <td>
                    <button type="button" class="delete-btn">X</button>
                </td>
            </form>
        </tr>
        {{/each}}
    </tbody>
</table>

<h2>
    <button type="button" id="showUpdateForm" class="update-btn">Update a Product-Supplier Relationship</button>
    <form id='updateForm' style="display:none;">
        <select name='update_product_id' id='update_product_id' required>
            <option value='' disabled selected>Select a Product</option>
            {{#each products}}
            <option value='{{this.productID}}' required>
                {{this.productID}} - {{this.productName}}
            </option>
            {{/each}}
        </select>
        <select name='update_product_id' id='update_product_id' required>
            <option value='' disabled selected>Select a Supplier</option>
            {{#each suppliers}}
            <option value='{{this.supplierID}}' required>
                {{this.supplierID}} - {{this.supplierName}} 
            </option>
            {{/each}}
        </select>

        <input type='submit' />
    </form>
</h2>

<script>
    var isUpdateShown = false;
    document.getElementById('showUpdateForm').onclick = function() {
        if (!isUpdateShown) {
            document.getElementById('updateForm').style.display = 'block';
            isUpdateShown = true;
        } else {
            document.getElementById('updateForm').style.display = 'none';
            isUpdateShown = false;
        }
    };
    // Hide the form after submission
    document.getElementById('updateForm').onsubmit = function() {
        this.style.display = 'none';
    };
</script>

